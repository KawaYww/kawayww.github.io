<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>æŸ³ä¸Šå·</title><meta name="description" content="æŸ³ä¸Šå·çš„åšå®¢"/><link rel="shortcut icon" href="/images/blog/avatar.avif" type="image/avif"/><link rel="stylesheet" href="/styles/highlight.min.css"/><link rel="stylesheet" href="/fonts/MapleMono-NF-CN-Regular/result.css"/><link rel="stylesheet" href="/fonts/MapleMono-NF-CN-Italic/result.css"/><link rel="stylesheet" href="/fonts/MapleMono-NF-CN-Bold/result.css"/><link rel="stylesheet" href="/styles/catppuccin-macchiato.css"/><link rel="stylesheet" href="/iconfonts/iconfont.css"/><link rel="stylesheet" href="/styles/tailwind.css"/><script src="/scripts/highlight.min.js"> </script><script src="/scripts/rust.min.js"> </script><script src="/scripts/nix.min.js"> </script><script src="/scripts/scheme.min.js"> </script><script src="/scripts/htmx.min.js"> </script><script src="/scripts/prefetch.js"> </script><script src="/scripts/custom.js"> </script><meta name="darkreader-lock"></head>
  <body>
    <div id="content" class="flex flex-col mx-4 mb-20 scroll-smooth" lang="zh-Hans">
      <div class="text-2xl sm:text-3xl my-4 w-full text-center">ã€gleam: use-expressionã€</div>
      <div class="font-medium w-fit sm:mx-auto flex flex-col border-l-4 pl-2 sm:flex-row sm:border-l-0 sm:pl-0">
        <p>[å†™è‡ª:2024-05-19</p>
        <div class="px-2 hidden sm:inline">â”‚</div>
        <p>ä½œè€…:æŸ³ä¸Šå· ]</p>
      </div>
      <div class="flex flex-col items-center m-4">
        <div class="w-fit mx-auto text-lg font-semibold">æ‘˜è¦</div>
        <div class="w-fit break-keep text-center sm:mx-[25%] *:inline">äº†è§£ä¸‹ gleam è¯­è¨€ä¸­çš„ use è¡¨è¾¾å¼å§</div>
      </div>
      <div class="flex flex-col my-10 w-fit border-2 border-slate-500">
        <p><span class="text-2xl">ç›®å½•:</span></p>
        <div class="w-fit pr-2 my-2">
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”Œâ”€â–º</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#abc">èƒŒæ™¯</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”œâ”€â–º</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#suo-jin-wen-ti">ç¼©è¿›é—®é¢˜</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”œâ”€â–º</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#usebiao-da-shi">useè¡¨è¾¾å¼</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â””â”€â–º</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#zong-jie">æ€»ç»“</a></span></div>
        </div>
      </div>
      <hr class="border-2 border-dashed my-10">
      <h1 class="flex items-center w-fit my-6" id="abc"><span class="text-2xl mr-2 text-cyan-500">ğŸ”—</span> <a class="text-4xl hover:underline underline-offset-8" href="#abc">èƒŒæ™¯</a></h1>
      <p>gleam æ˜¯ä¸€é—¨ç±»å‹å®‰å…¨, é«˜åº¦æ‰©å±•, è¯­æ³•å‹å–„, è¡¨è¾¾åŠ›å¼ºçš„ç°ä»£ç¼–ç¨‹è¯­è¨€<br>gleam åœ¨ v0.25 ç‰ˆæœ¬ä¸­å¼•å…¥äº†ä¸€ç§æœŸå¾…å·²ä¹…çš„æ–°åŠŸèƒ½: <code class="font-semibold text-[#aa8bd5]"><code>use</code></code><br><br>å½“æˆ‘ä»¬æ•²ä»£ç  <code class="font-semibold text-[#aa8bd5]"><code>open</code></code> ä¸€ä¸ª <code class="font-semibold text-[#aa8bd5]"><code>File</code></code> æ—¶, ä½¿ç”¨å®Œæ¯•ä¹‹åå°±å¾—è°ƒç”¨å¯¹åº”çš„ <code class="font-semibold text-[#aa8bd5]"><code>close</code></code> æ–¹æ³•, ä¿è¯æ–‡ä»¶æ­£ç¡®å…³é—­<br>å€˜è‹¥æ¯æ¬¡éƒ½å¾—ç”±ç¨‹åºå‘˜æ‰‹åŠ¨ä¿è¯è°ƒç”¨ close, ä¸ä»…ç¹çè€Œä¸”å®¹æ˜“å‡ºé”™<br><br>åœ¨ä¸»æµè¯­è¨€ä¸­, ä½ ä¼šå‘ç°å„ç§å„æ ·çš„, ç®¡ç†ä¸é‡Šæ”¾èµ„æºçš„ä¸åŒå§¿åŠ¿:<br></p>
      <ul class="list-disc ml-5">
        <li>go/zig ä¸­çš„ <code class="font-semibold text-[#aa8bd5]"><code>defer</code></code> è¯­å¥, å°†åœ¨å‡½æ•°/ä»£ç å—ç»“æŸä¹‹å‰è¢«è°ƒç”¨</li>
        <li>java ä¸­çš„ <code class="font-semibold text-[#aa8bd5]"><code>try-with-resource</code></code>, è®©å®ç°äº† <code class="font-semibold text-[#aa8bd5]"><code>AutoClosable</code></code> æ¥å£çš„å®ä¾‹åœ¨ <code class="font-semibold text-[#aa8bd5]"><code>try-catch</code></code> åè‡ªåŠ¨è°ƒç”¨ <code class="font-semibold text-[#aa8bd5]"><code>close()</code></code> æ–¹æ³•</li>
        <li>c# ä¸­çš„ <code class="font-semibold text-[#aa8bd5]"><code>using</code></code>, ä½œç”¨äºå®ç°äº† <code class="font-semibold text-[#aa8bd5]"><code>IDisposable</code></code> æ¥å£çš„å®ä¾‹, ç¼–è¯‘å™¨å°† <code class="font-semibold text-[#aa8bd5]"><code>using</code></code> è‡ªåŠ¨è½¬æ¢ä¸ºç­‰ä»·çš„ <code class="font-semibold text-[#aa8bd5]"><code>try-finally</code></code></li>
        <li>cpp/rust ä¸­çš„ <code class="font-semibold text-[#aa8bd5]"><code>RAII</code></code>, è®©èµ„æºçš„ç”Ÿå­˜æœŸä¸å˜é‡çš„ä½œç”¨åŸŸç›¸äº’ç»‘å®š</li>
        <li>â€¦â€¦</li>
        <li>â€¦â€¦</li>
      </ul>
      <p><br>ä½†æ˜¯åœ¨ gleam è¯­è¨€ä¸­, å·²ç»å­˜åœ¨äº†ä¸€ä¸ªç”¨äºè§£å†³ä¸Šè¿°é—®é¢˜, å¹¶ä¸”æ›´åŠ æ³›ç”¨çš„è¯­æ³•: <code class="font-semibold text-[#aa8bd5]"><code>use</code></code><br>(ç±»ä¼¼çš„æ¦‚å¿µåœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿå­˜åœ¨, è¿™å¹¶éæ˜¯ gleam ç‹¬åˆ›çš„, å€Ÿé‰´äº† ocaml, koka, roc, mlç³»åˆ—, ç”šè‡³ python)<br></p>
      <hr class="border-2 border-dashed my-10">
      <h1 class="flex items-center w-fit my-6" id="suo-jin-wen-ti"><span class="text-2xl mr-2 text-cyan-500">ğŸ”—</span> <a class="text-4xl hover:underline underline-offset-8" href="#suo-jin-wen-ti">ç¼©è¿›é—®é¢˜</a></h1>
      <p>è®©æˆ‘ä»¬æ¥ç‚¹ä¾‹å­, å‡è®¾å­˜åœ¨è¿™ä¹ˆä¸€æ®µä»£ç :<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">pub fn login(credentials) {
  case authenticate(credentials) {
    Error(e) -> Error(e)
    Ok(user) ->
      case fetch_profile(user) {
        Error(e) -> Error(e)
        Ok(profile) -> render_welcome(user, profile)
      }
  }
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p><code class="font-semibold text-[#aa8bd5]"><code>authenticate</code></code> ä¸ <code class="font-semibold text-[#aa8bd5]"><code>fetch_profile</code></code> ä¼šè¿”å› <code class="font-semibold text-[#aa8bd5]"><code>Result</code></code> ç±»å‹, ç”¨ <code class="font-semibold text-[#aa8bd5]"><code>Ok/Error</code></code> åˆ†åˆ«è¡¨ç¤ºæˆåŠŸä¸å¤±è´¥æ—¶çš„æƒ…å†µ, å¹¶åŒ…è£¹è¿”å›çš„å€¼:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">import gleam/io

pub type Result(a, e) {
  Ok(a)
  Error(e)
}

pub fn main() {
  let a = Error("error")
  let info = case a {
    Ok(_) -> "It's ok"
    Error(_) -> "It's error"
  }
  io.println(info)
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>å†å›è¿‡å¤´å»çœ‹å‰é¢çš„é‚£æ®µä»£ç , æ„æ€å°±æ˜¯å½“å‰ä¸€æ­¥æˆåŠŸ(Ok)æ—¶, å†è¿è¡Œä¸‹ä¸€æ­¥(Ok), æ¯ä¸€æ­¥å¤±è´¥æ—¶å°±è¿”å›é”™è¯¯(Error)<br>ä½†è¿™æœ‰ä¸€ä¸ªçƒ¦æ¼: ä»£ç çš„ç¼©è¿›é—®é¢˜å¾ˆä¸¥é‡, å€˜è‹¥æŸä¸ªå‡½æ•°é‡Œè°ƒç”¨äº†è®¸å¤šä¸ªä¼šè¿”å› <code class="font-semibold text-[#aa8bd5]"><code>Result</code></code> ç±»å‹çš„å‡½æ•°â€¦â€¦<br><br>äºæ˜¯ gleam åœ¨æ—©æœŸçš„ v-0.9 ç‰ˆæœ¬å¼•å…¥äº† <code class="font-semibold text-[#aa8bd5]"><code>try</code></code> è¯­æ³•, å¯ä»¥å°†å‰æ–‡çš„ä»£ç å†™æˆå¦‚ä¸‹çš„ç­‰ä»·å½¢å¼:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">// å½“å‰ä¸€æ­¥å¤±è´¥æ—¶ç›´æ¥å°† Error ä½œä¸ºè¿™ä¸€æ®µè½çš„è¡¨è¾¾å¼, æ— è§†åé¢çš„ä»£ç 
pub fn login(credentials) {
  try user = authenticate(credentials)
  try profile = fetch_profile(user)
  render_welcome(user, profile)
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>è¿™å¾ˆå¥½, ä½†ä»ä¸å¤Ÿå¥½, ç¼©è¿›é—®é¢˜æ²¡è¢«å®Œå…¨è§£å†³<br>å¯¼è‡´ç¼©è¿›å¤æ‚çš„æƒ…å†µè¿˜åŒ…æ‹¬ <em>é—­åŒ…/åŒ¿åå‡½æ•°/å›è°ƒå‡½æ•°</em>:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">pub fn handle_request(request: HttpRequest) {
  logger.span("handle_request", fn() {
    database.connection(fn(conn) {
      case request.method {
        Post ->
          case database.insert(conn, request.body) {
            Ok(record) -> created_response(record)
            Error(exc) -> bad_request_response(exc)
          }
        _ -> method_not_allowed_response()
      }
    })
  })
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>æ˜¾è€Œæ˜“è§, è¿™æ®µä»£ç è™½ç„¶æ¡ç†æ¸…æ™°, ä½†å®è¯å®è¯´çœ‹è§çš„ç¬¬ä¸€çœ¼å¹¶ä¸å®¹æ˜“é˜…è¯», ä¹Ÿå› ä¸ºç¼©è¿›é—®é¢˜è€Œä¸å¤Ÿç¾è§‚<br>å½“è¿™ç§ é—­åŒ…/åŒ¿åå‡½æ•°/å›è°ƒå‡½æ•° ä¸€å¤šèµ·æ¥, å°±ä¼šå‡ºç°è‘—åçš„ å›è°ƒå‡½æ•°åœ°åŸŸ(callback-hall)<br><br>gleam å›¢é˜Ÿç»™å‡ºçš„è§£å†³æ–¹æ¡ˆå°±æ˜¯æ–°çš„ <code class="font-semibold text-[#aa8bd5]"><code>use</code></code> è¡¨è¾¾å¼, åœ¨ä¿æŒç®€å•æ¦‚å¿µçš„åŒæ—¶, å¤„ç† é”™è¯¯å¤„ç†/å›è°ƒå‡½æ•°/èµ„æºç®¡ç† æ—¶çš„ç¼©è¿›é—®é¢˜:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">pub fn handle_request(request: HttpRequest) {
  use &lt;- logger.span("handle_request")
  use &lt;- require_method(request, Post)
  use conn &lt;- database.connection()

  case database.insert(conn, request.body) {
    Ok(record) -> created_response(record)
    Error(exc) -> bad_request_response(exc)
  }
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>ä¸‹é¢å°†æ­£å¼ä»‹ç» <code class="font-semibold text-[#aa8bd5]"><code>use-expression</code></code> çš„ä¸€äº›ä½¿ç”¨ä¾‹å­<br></p>
      <hr class="border-2 border-dashed my-10">
      <h1 class="flex items-center w-fit my-6" id="usebiao-da-shi"><span class="text-2xl mr-2 text-cyan-500">ğŸ”—</span> <a class="text-4xl hover:underline underline-offset-8" href="#usebiao-da-shi">useè¡¨è¾¾å¼</a></h1>
      <p><code class="font-semibold text-[#aa8bd5]"><code>use</code></code> ä»…ä»…æ˜¯ä¸€äº›è¯­æ³•ç³–, å®ƒå°†åç»­çš„æ‰€æœ‰è¡¨è¾¾å¼è½¬æ¢ä¸º é—­åŒ…/åŒ¿åå‡½æ•°, å°†æ­¤å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code class="font-semibold text-[#aa8bd5]"><code>use</code></code> å³ä¾§çš„è°ƒç”¨<br>ä¾‹å¦‚, å‡è®¾æœ‰ä¸€ä¸ªå‡½æ•° <code class="font-semibold text-[#aa8bd5]"><code>with_file</code></code>, æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶, è¿›è¡Œè¯»å†™, ç„¶åå…³é—­è¯¥æ–‡ä»¶:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">fn open(file) {
  todo
}

fn close(file) {
  todo
}

// Define the function
pub fn with_file(path, handler) {
  let file = open(path)
  handler(file)
  close(file)
}

// Use it
pub fn main() {
  with_file("pokemon.txt", fn(file) {
    write(file, "Oddish\n")
    write(file, "Farfetch'd\n")
  })
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>åœ¨ gleam è¯­è¨€ä¸­, å°å†™çš„å‚æ•°è¡¨ç¤ºæ³›å‹, ç±»å‹ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨æ¨å¯¼, å› æ­¤ä¸Šé¢çš„ä¾‹å­æ˜¯å¯ä»¥ç¼–è¯‘çš„, å¹¶éä¼ªä»£ç <br>ä½¿ç”¨ use æ— éœ€é¢å¤–ç¼©è¿›å³å¯è°ƒç”¨:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">pub fn main() {
  use file &lt;- with_file("pokemon.txt")
  write(file, "Oddish\n")
  write(file, "Farfetch'd\n")
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>å®ƒä¸ä»…é™äºå•ä¸ªå‚æ•°, è¿˜å¯ç”¨äºä»»ä½•å‚æ•°çš„å‡½æ•°, åŒ…æ‹¬ä¸æ¥å—å‚æ•°çš„å‡½æ•°<br>è¿™ä¸ª <code class="font-semibold text-[#aa8bd5]"><code>use</code></code> è¡¨è¾¾å¼æ˜¯é«˜åº¦é€šç”¨çš„, ä¸é™äºä»»ä½•ç‰¹å®šç±»å‹, æ¥å£, å› æ­¤å®ƒå¯ä»¥åº”ç”¨äºè®¸å¤šä¸åŒçš„äº‹ç‰©<br>(åœ¨ gleam è¯­è¨€ä¸­, å°å†™çš„å‚æ•°è¡¨ç¤ºæ³›å‹, ç±»å‹ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨æ¨å¯¼, å› æ­¤çœ‹è§ä¸‹é¢ä¾‹å­ä¸­è¯¸å¦‚ <code class="font-semibold text-[#aa8bd5]"><code>defer</code></code> æ—¶, è¿˜è¯·ä¸è¦æƒŠè®¶)<br><br>ä¸‹é¢æ˜¯ä¸€äº›å°ä¾‹å­:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">//  ç¼–å†™ http ä¸­é—´ä»¶ 
pub fn require_method(request, method, continue) {
  case request.method == method {
    True -> continue()
    False -> method_not_allowed()
  }
}

pub fn handle_request(request) {
  use &lt;- require_method(request, Post)
  // ...
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">// å¤åˆ¶ go/zig ç­‰è¯­è¨€ä¸­çš„ defer è¯­æ³• 
pub fn defer(cleanup, body) {
  body()
  cleanup()
}

pub fn main() {
  use &lt;- defer(fn() { io.println("Goodbye") })
  io.println("Hello!")
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">// å¤åˆ¶ elixir/haskell/scala ç­‰è¯­è¨€ä¸­çš„ `for-comprehension`
import gleam/list

pub fn main() {
  use letter &lt;- list.flat_map(["a", "b", "c"])
  use number &lt;- list.map([1, 2, 3])
  #(letter, number)
}

// [
//   #("a", 1), #("a", 2), #("a", 3),
//   #("b", 1), #("b", 2), #("b", 3),
//   #("c", 1), #("c", 2), #("c", 3),
// ]</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">// å¤åˆ¶ gleam è‡ªå·±çš„ `try` è¡¨è¾¾å¼(ç›®å‰å·²è¢« `use` å–ä»£) 
pub fn attempt(result, transformation) {
  case result {
    Ok(x) -> transformation(x)
    Error(y) -> Error(y)
  }
}

pub fn main() {
  use user &lt;- attempt(authenticate(credentials))
  use profile &lt;- attempt(fetch_profile(user))
  render_welcome(user, profile)
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <hr class="border-2 border-dashed my-10">
      <h1 class="flex items-center w-fit my-6" id="zong-jie"><span class="text-2xl mr-2 text-cyan-500">ğŸ”—</span> <a class="text-4xl hover:underline underline-offset-8" href="#zong-jie">æ€»ç»“</a></h1>
      <p>gleam è¯­è¨€ä¸­çš„ <code class="font-semibold text-[#aa8bd5]"><code>use</code></code> æ˜¯æ”¯æŒäº† å¥æ³•å˜æ¢(syntactic-transformation) è¿™ä¸€æ¦‚å¿µçš„è¯­æ³•<br>å®ƒç›¸æ¯”è¾ƒäºä¸»æµè¯­è¨€æ›´åŠ æ³›ç”¨, ä»…ä»…æ˜¯å‡½æ•°åº”ç”¨çš„è¯­æ³•ç³–, è€Œéè¯¸å¦‚ defer/using ç­‰é’ˆå¯¹ç‰¹å®šé—®é¢˜çš„ç‰¹æ®Šæ”¯æŒ<br>è¿™ç§æ¦‚å¿µåœ¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­è¾ƒä¸ºå¸¸è§, å¦‚ ocaml ä¸­çš„ <code class="font-semibold text-[#aa8bd5]"><code>let*</code></code>, koka ä¸­çš„ <code class="font-semibold text-[#aa8bd5]"><code>with</code></code>, roc ä¸­çš„ <code class="font-semibold text-[#aa8bd5]"><code>backpassing</code></code>, ä¸ <code class="font-semibold text-[#aa8bd5]"><code>use</code></code> éƒ½æ˜¯ååˆ†ç›¸ä¼¼çš„æ¦‚å¿µ<br>(ä¸Šé¢æœ‰éƒ¨åˆ†æ¶‰åŠåˆ° <code class="font-semibold text-[#aa8bd5]"><code>algebraic effect</code></code>, æ¯” gleam è¿™ç§å•çº¯çš„ç©æ„è¦é«˜çº§å¾ˆå¤š)<br><br>use ä½¿å¾—åµŒå¥—(nested)çš„å‡½æ•°å¯ä»¥è¢«è½»æ¾åœ°æ‰å¹³åŒ–(flatten)<br><br>ä¸ºäº†æ›´åŠ ç›´è§‚åœ°ä½“ç°è¿™ç‚¹, æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªå‡½æ•° twice, å‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…, è®©è¯¥é—­åŒ…å¯ä»¥è¿è¡Œä¸¤æ¬¡:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">import gleam/io

fn twice(f) {
  f()
  f()
}

fn main() {
  twice(fn() { io.print("Message ") })
}

// Message Message</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>ä½¿ç”¨ <code class="font-semibold text-[#aa8bd5]"><code>use</code></code> çš„ç­‰ä»·å†™æ³•:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">fn main() {
  use &lt;- twice()
  io.print("Message ")
}

// Message Message</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>å½“å‘ç”ŸåµŒå¥—æ—¶(æˆ‘ä»¬æƒ³è°ƒç”¨ä¸¤æ¬¡, ä¸‰æ¬¡, æ›´å¤šæ¬¡ twice æ—¶), use çš„ä¼˜åŠ¿ä¼šæ›´åŠ æ˜æ˜¾:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">fn main() {
  twice(fn() { twice(fn() { twice(fn() { io.print("Message") }) }) })
}

// Message Message Message Message Message Message Message Message</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">fn main() {
  use &lt;- twice()
  use &lt;- twice()
  use &lt;- twice()
  io.println("Message")
}

// Message Message Message Message Message Message Message Message</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>äºæ­¤åŒæ—¶, å› ä¸º gleam æ˜¯é—¨ç±»å‹å®‰å…¨çš„è¯­è¨€, æˆ‘ä»¬åœ¨ä½¿ç”¨ <code class="font-semibold text-[#aa8bd5]"><code>use</code></code> æ—¶ä¹Ÿä¼šæ£€æŸ¥æ˜¯å¦åŒ¹é…ç±»å‹çš„, æ¯”å¦‚:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">fn print(self: List(String)) {
  use &lt;- bool.guard(when: self |> list.is_empty, return: io.print("Empty list"))

  use i &lt;- list.each(self)
  io.println(i)
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>å€˜è‹¥å½“æˆ‘ä»¬ç–å¿½åœ°å†™æˆäº†è¿™æ ·:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">fn print(self: List(String)) {
  use &lt;- bool.guard(when: self |> list.is_empty, return: "Empty list")

  use i &lt;- list.each(self)
  io.println(i)
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-text text-sm sm:text-base">Expected type:
    String

Found type:
    Nil</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>è¿™é‡Œå†æ¥ä¸€ä¸ªå…¶ä»–è¯­è¨€ä½œä¸º åµŒå¥— è¢« æ‰å¹³åŒ– çš„ä¾‹å­å§, æ¥è‡ª rock è¯­è¨€çš„ <code class="font-semibold text-[#aa8bd5]"><code>backpassing</code></code>, ä»¥ä¸‹ä¸¤æ®µä»£ç ç­‰ä»·:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">readLicense : Filename -> Task License File.ReadErr
readLicense = \filename ->
  Task.await (File.readUtf8 settingsFilename) \settingsYaml ->
    settingsYaml
      |> Yaml.decode settingsDecoder
      |> Task.fromResult
      |> Task.mapFail InvalidFormat
      |> Task.await \settings ->
        Task.await (File.readUtf8 settings.projectFilename) \projectCsv ->
          projectCsv
            |> Csv.decode projectDecoder
            |> Task.fromResult
            |> Task.mapFail InvalidFormat
            |> Task.await \project ->
              Task.await (File.readUf8 project.licenseFilename) \licenseStr ->
                License.fromStr licenseStr
                  |> Task.fromResult
                  |> Task.mapFail InvalidFormat</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>ä½¿ç”¨ <code class="font-semibold text-[#aa8bd5]"><code>backpassing</code></code>:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-rust text-sm sm:text-base">readLicense : Filename -> Task License File.ReadErr
readLicense = \filename ->
  settingsYaml &lt;- Task.await (File.readUtf8 settingsFilename)

  settings &lt;-
    settingsYaml
      |> Yaml.decode settingsDecoder
      |> Task.fromResult
      |> Task.mapFail InvalidFormat

  projectCsv &lt;- Task.await (File.readUtf8 settings.projectFilename)

  project &lt;-
    projectCsv
      |> Csv.decode projectDecoder
      |> Task.fromResult
      |> Task.mapFail InvalidFormat

  licenseStr &lt;-
    Task.await (File.readUf8 project.licenseFilename)

  License.fromStr licenseStr
    |> Task.fromResult
    |> Task.mapFail InvalidFormat</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <hr class="border-2 border-dashed my-10">
      <div class="flex flex-col sm:mx-2 *:my-2"><a class="flex items-center border-2 border-slate-500 w-full sm:rounded-md hover:border-white  justify-end " href="/posts/gleam/phantom-type" hx-get="/posts/gleam/phantom-type/index.html" hx-target="body" hx-push-url="/posts/gleam/phantom-type" hx-swap="innerHTML show:window:top"><span class="text-2xl sm:text-4xl sm:p-2 pr-2 pl-1 order-last ">></span> <span class="text-xl sm:text-2xl sm:p-2">gleam: phantom-type</span></a></div>
    </div>
  </body>
</html>
