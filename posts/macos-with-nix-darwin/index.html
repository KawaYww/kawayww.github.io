<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>æŸ³ä¸Šå·</title><meta name="description" content="æŸ³ä¸Šå·çš„åšå®¢"/><link rel="shortcut icon" href="/images/blog/avatar.avif" type="image/avif"/><link rel="stylesheet" href="/styles/highlight.min.css"/><link rel="stylesheet" href="/fonts/MapleMono-NF-CN-Regular/result.css"/><link rel="stylesheet" href="/fonts/MapleMono-NF-CN-Italic/result.css"/><link rel="stylesheet" href="/fonts/MapleMono-NF-CN-Bold/result.css"/><link rel="stylesheet" href="/styles/catppuccin-macchiato.css"/><link rel="stylesheet" href="/iconfonts/iconfont.css"/><link rel="stylesheet" href="/styles/tailwind.css"/><script src="/scripts/highlight.min.js"> </script><script src="/scripts/rust.min.js"> </script><script src="/scripts/nix.min.js"> </script><script src="/scripts/scheme.min.js"> </script><script src="/scripts/htmx.min.js"> </script><script src="/scripts/prefetch.js"> </script><script src="/scripts/custom.js"> </script><meta name="darkreader-lock"></head>
  <body>
    <div id="content" class="flex flex-col mx-4 mb-20 scroll-smooth" lang="zh-Hans">
      <div class="text-2xl sm:text-3xl my-4 w-full text-center">ã€macos &amp; nix-darwinã€</div>
      <div class="font-medium w-fit sm:mx-auto flex flex-col border-l-4 pl-2 sm:flex-row sm:border-l-0 sm:pl-0">
        <p>[å†™è‡ª:2025-08-19</p>
        <div class="px-2 hidden sm:inline">â”‚</div>
        <p>ä½œè€…:æŸ³ä¸Šå· ]</p>
      </div>
      <div class="flex flex-col items-center m-4">
        <div class="w-fit mx-auto text-lg font-semibold">æ‘˜è¦</div>
        <div class="w-fit break-keep text-center sm:mx-[25%] *:inline">å›½è¡¥+æ•™è‚²ä¼˜æƒ , macbook çš„ä»·æ ¼å‡äº† 4k å¤š, é¦™ç–¯å•¦!<br>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨ macos ä¸Šé€šè¿‡ <a class="underline underline-offset-5 font-medium" href="https://github.com/nix-darwin/nix-darwin">nix-darwin</a> å¯¹ç³»ç»Ÿè¿›è¡Œå£°æ˜å¼é…ç½®<br></div>
      </div>
      <div class="flex flex-col my-10 w-fit border-2 border-slate-500">
        <p><span class="text-2xl">ç›®å½•:</span></p>
        <div class="w-fit pr-2 my-2">
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”Œâ”€â–º</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#jie-shao">ä»‹ç»</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”œâ”€â”€â”€</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#nix">nix</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”œâ”€â”€â”€</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#flake">flake</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”œâ”€â–º</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#an-zhuang">å®‰è£…</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”œâ”€â–º</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#mu-lu-jie-gou">ç›®å½•ç»“æ„</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”œâ”€â–º</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#pei-zhi">é…ç½®</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”œâ”€â”€â”€</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#darwin">darwin</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”œâ”€â”€â”€</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#users">users</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â”œâ”€â”€â”€</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#ruan-jian-yuan">è½¯ä»¶æº</a></span></div>
          <div class="leading-5"><span class="pl-2"><span class="font-bold text-sm">â””â”€â”€â”€</span><a class="text-sm hover:text-sky-500 hover:font-semibold hover:underline underline-offset-5" href="#home-manager">home-manager</a></span></div>
        </div>
      </div>
      <hr class="border-2 border-dashed my-10">
      <h1 class="flex items-center w-fit my-6" id="jie-shao"><span class="text-2xl mr-2 text-cyan-500">ğŸ”—</span> <a class="text-4xl hover:underline underline-offset-8" href="#jie-shao">ä»‹ç»</a></h1>
      <p>æœ¬æ–‡ä¸æ‰“ç®—ç³»ç»Ÿä»‹ç» nix, ç›®çš„ä»…æ˜¯ç®€å•åˆ†äº«ä¸‹ macos ä¸Šçš„é…ç½®, æ–¹ä¾¿å¤§å®¶å‚è€ƒä»¥èŠ‚çœæ—¶é—´<br>å› æ­¤, ä¸‹é¢ä»…æä¾›å¯¹åŸºæœ¬æ¦‚å¿µçš„è§£é‡Š, å½“ç„¶æˆ‘ä¹Ÿè´´äº†ä¹¦ä¹¦é“¾æ¥æ–¹ä¾¿å‚è€ƒ<br></p>
      <h2 class="flex items-center w-fit my-6" id="nix"><span class="text-2xl m-2 text-cyan-500">></span> <a class="text-2xl hover:underline underline-offset-8" href="#nix">nix</a></h2>
      <p>æˆ‘å®åœ¨æ˜¯æ‡’å¾—ä»‹ç» nix åˆ°åº•æ˜¯å•¥å•¦! ç½‘ä¸Šç›¸æ¯”å‰å‡ å¹´æ¶Œç°äº†å¤§é‡èµ„æ–™<span style="display: inline-block"><del>(è™½ç„¶è¯­æ³•ä¸æ–‡æ¡£è¿˜æ˜¯éš¾ç»·)</del></span><br>ç®€å•æ¥è®²çš„è¯, nix å°±æ˜¯ä¸€ä¸ªå¯å¤ç°æ€§/å£°æ˜å¼çš„åŒ…ç®¡ç†å™¨, æ— æ³•é¿å…æŠ˜è…¾, ä½†åªè¦æˆåŠŸä¸€æ¬¡, ä»¥åå°±åŸºæœ¬ä¸ä¼šå»æŠ˜è…¾äº†<span style="display: inline-block"><del>(åº”è¯¥)</del></span><br>ä¸æ­¤åŒæ—¶, ç¤¾åŒºä¹Ÿæä¾›äº†å¤§é‡çš„æ¨¡å—é€‰é¡¹, æ–¹ä¾¿å¤§å®¶ç›´æ¥å»æ— è„‘ä½¿ç”¨<br><br>åŒæ—¶, nix ç¤¾åŒºä¹Ÿå¯¹ macos æä¾›äº†é…ç½®ç³»ç»Ÿçš„æ”¯æŒ(<a class="underline underline-offset-5 font-medium" href="https://github.com/nix-darwin/nix-darwin">nix-darwin</a>), è™½ç„¶å®Œå–„åº¦è‚¯å®šä¸å¦‚ nixos, ä½†å³ä½¿è¿™æ ·ä½“éªŒä¹Ÿä¼šå¥½ä¸å°‘<br>ä¸¾ä¸ªç®€å•çš„ä¾‹å­, æˆ‘ç°åœ¨æ‰“ç®—é…ç½®æˆ‘çš„ <code class="font-semibold text-[#aa8bd5]"><code>git</code></code>:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-nix text-sm sm:text-base"># ~/nix-darwin/home/terminal/git.nix
{ vars, ... }:

{
  programs.git = {
    enable = true;
    userName = "${vars.userName}";
    userEmail = "${vars.userEmail}";
    extraConfig = {
      init.defaultBranch = "main";
      http.postBuffer = "524288000";
    };
  };
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>ä¸Šé¢çš„ <code class="font-semibold text-[#aa8bd5]"><code>vars</code></code> æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„, ç„¶ååªè¦åœ¨ <a class="underline underline-offset-5 font-medium" href="https://mynixos.com">mynixos</a> ä¸ŠæŸ¥è¯¢ <code class="font-semibold text-[#aa8bd5]"><code>git</code></code> ç›¸å…³çš„é…ç½®, ç…§çŒ«ç”»è™å¡«ç©ºå³å¯<br></p>
      <h2 class="flex items-center w-fit my-6" id="flake"><span class="text-2xl m-2 text-cyan-500">></span> <a class="text-2xl hover:underline underline-offset-8" href="#flake">flake</a></h2>
      <p>ç°åœ¨æ˜¯ 2025 å¹´äº†, æ˜å¹´æ˜¯ 2026, ç„¶åæ˜¯ 2027â€¦â€¦<br>å“ªæ€•å†è¿‡ 5 å¹´ <code class="font-semibold text-[#aa8bd5]"><code>flake</code></code> è¿™ç©æ„è¿˜æ˜¯æ²¡è¢«å®˜æ–¹æ”¶ç¼–, ä½†å…¶ä¹Ÿæ—©å°±æˆä¸ºå¤§å®¶å¿ƒç…§ä¹Ÿå®£çš„æ ‡å‡†<br>flake ä¹Ÿæ‡’å¾—ä»‹ç»äº†, è¿™ç©æ„ç±»ä¼¼ <code class="font-semibold text-[#aa8bd5]"><code>Cargo.lock</code></code>/<code class="font-semibold text-[#aa8bd5]"><code>package-lock.json</code></code>/<code class="font-semibold text-[#aa8bd5]"><code>go.sum</code></code> ç­‰, é”å®šä¾èµ–ç‰ˆæœ¬, ä¿è¯å¯å¤ç°æ€§, æé«˜ purity<br>å¦‚æœä½ æƒ³æ›´åŠ ç³»ç»Ÿåœ°äº†è§£ nix çš„è¯­æ³•ä¸ä½¿ç”¨, è¯·å‰å¾€ä¼Ÿå¤§çš„ <a class="underline underline-offset-5 font-medium" href="https://nixos-and-flakes.thiscute.world">NixOS &amp; Flakes Book</a>, å›½äººç¼–å†™, æœ‰ä¸­æ–‡ç‰ˆ<br><br>æ¯”å¦‚, ä¸€ä¸ª <code class="font-semibold text-[#aa8bd5]"><code>flake.nix</code></code> å¯ä»¥åƒè¿™æ ·å†™:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-nix text-sm sm:text-base"># ~/nix-darwin/flake.nix
{
  description = "macos configuration";

  inputs = {
    nixpkgs.url = "github:nixos/nixpkgs/nixpkgs-unstable"; # OR: github:nixos/nixpkgs/nixpkgs-25.05
    darwin = {
      url = "github:nix-darwin/nix-darwin";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };

  outputs = inputs @ { nixpkgs, darwin ... }:
  let
    system = "aarch64-darwin";
    hostname = "darwin";
    lib = nixpkgs.lib;
    vars = rec {
      inherit system hostname;
      userName = "kawayww"; # TODO: edit it
      userEmail = "kawayww@gmail.com"; # TODO: edit it
    };
    specialArgs = { inherit inputs vars; };
  in
  {
    darwinConfigurations."${hostname}" = darwin.lib.darwinSystem {
      inherit system specialArgs;
      modules = [
        ./modules/nixconf.nix
        ./modules/users.nix
        ./modules/system
        ./modules/dev
      ];
    };
  };
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>çœ‹èµ·æ¥å¾ˆç®€å•å§! <code class="font-semibold text-[#aa8bd5]"><code>inputs</code></code> æŒ‡å®šäº†æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„æ‰€æœ‰ä¾èµ–, <code class="font-semibold text-[#aa8bd5]"><code>outputs</code></code> æŒ‡å®šäº†æˆ‘ä»¬æœ€ç»ˆè¾“å‡ºçš„é…ç½®ç»“æœ<br></p>
      <ul class="list-disc ml-5">
        <li>ä¸Šé¢çš„ <code class="font-semibold text-[#aa8bd5]"><code>specialArgs</code></code> æè¿°äº†æˆ‘ä»¬æƒ³ä¼ é€’çš„å˜é‡(æ¯”å¦‚ <code class="font-semibold text-[#aa8bd5]"><code>vars</code></code>), ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä»–æ–‡ä»¶å¼€å¤´, ç”¨ <code class="font-semibold text-[#aa8bd5]"><code>{ vars, ... }</code></code> å¼•å…¥è€Œä¸æŠ¥é”™<br></li>
        <li>ä¸Šé¢çš„ <code class="font-semibold text-[#aa8bd5]"><code>inherit</code></code> å¯ä»¥è®©æˆ‘ä»¬é¿å…é‡å¤è¾“å…¥ä¸€äº›æœºæ¢°åŒ–çš„ä»£ç , <code class="font-semibold text-[#aa8bd5]"><code>inherit xxx</code></code> ç­‰ä»·äº <code class="font-semibold text-[#aa8bd5]"><code>xxx = xxx</code></code><br></li>
        <li>ä¸Šé¢çš„ <code class="font-semibold text-[#aa8bd5]"><code>modules</code></code>, æˆ‘ä»¬å¯¼å…¥äº†æ¨¡å—çš„è·¯å¾„, å¦‚æœæŸä¸ªç›®å½•ä¸‹æœ‰ <code class="font-semibold text-[#aa8bd5]"><code>default.nix</code></code>, é‚£ä¹ˆå¯ä»¥ç›´æ¥ç”¨è¯¥ç›®å½•å, å¹¶çœç•¥åé¢çš„ <code class="font-semibold text-[#aa8bd5]"><code>default.nix</code></code><br></li>
      </ul>
      <p><br>ç”±äº flake çš„ç‰¹æ€§, å½“ä½ åœ¨é…ç½®ç›®å½•ä¸­æ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶æ—¶, è¯·ç¡®ä¿è¿è¡Œ <code class="font-semibold text-[#aa8bd5]"><code>git add .</code></code>, ä¸ç„¶ flake ä¼šè®¤ä¸ºæ–‡ä»¶ä¸å­˜åœ¨<br>ç¯‡å¹…å¤ªé•¿äº†, å”‰å¥½ç´¯, èµ¶ç´§æ­¥å…¥åˆ°å¤§å®¶å¯ä»¥æ„‰å¿« copy çš„æ­£é¢˜å§!<br></p>
      <hr class="border-2 border-dashed my-10">
      <h1 class="flex items-center w-fit my-6" id="an-zhuang"><span class="text-2xl mr-2 text-cyan-500">ğŸ”—</span> <a class="text-4xl hover:underline underline-offset-8" href="#an-zhuang">å®‰è£…</a></h1>
      <p>æˆ‘ç›´æ¥ç”¨çš„ <a class="underline underline-offset-5 font-medium" href="https://lix.systems/install/">lix</a> æ¥å®‰è£… nix:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-text text-sm sm:text-base">curl -sSf -L https://install.lix.systems/lix | sh -s -- install</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <p>è·Ÿç€èµ°, å®‰è£…å®Œååº”è¯¥åœ¨ç»ˆç«¯è¾“å…¥ <code class="font-semibold text-[#aa8bd5]"><code>nix --version</code></code>, åº”è¯¥å¯ä»¥çœ‹è§ä¸€ä¸ªæ‹¬å·, é‡Œé¢æœ‰ <code class="font-semibold text-[#aa8bd5]"><code>Lix</code></code> çš„å­—çœ¼<br>ç°åœ¨, éšä¾¿åœ¨å“ªä¸ªä½ç½®æ–°å»ºä¸€ä¸ªéšä¾¿åå­—çš„æ–‡ä»¶å¤¹, ç„¶åæ–°å»ºä¸€ä¸ª <code class="font-semibold text-[#aa8bd5]"><code>flake.nix</code></code> æ–‡ä»¶, å¼€å§‹å¡«å……æˆ‘ä»¬çš„é…ç½®<br><br>å½“æˆ‘ä»¬ä¿®æ”¹é…ç½®, æƒ³è¦è®©é…ç½®ç”Ÿæ•ˆæ—¶, å¯ä»¥åœ¨ç›®å½•æ ¹ç›®å½•ä¸‹å†™ä¸€ä¸ª <code class="font-semibold text-[#aa8bd5]"><code>switch.sh</code></code> æ–‡ä»¶:<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-bash text-sm sm:text-base">#/usr/bin/env bash
sudo -H nix run nix-darwin/master#darwin-rebuild -- switch --flake ./#darwin   # è¿™é‡Œçš„ "darwin" å°±æ˜¯é…ç½®ä¸­çš„ `hostname`</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <hr class="border-2 border-dashed my-10">
      <h1 class="flex items-center w-fit my-6" id="mu-lu-jie-gou"><span class="text-2xl mr-2 text-cyan-500">ğŸ”—</span> <a class="text-4xl hover:underline underline-offset-8" href="#mu-lu-jie-gou">ç›®å½•ç»“æ„</a></h1>
      <p>ä»…ä¾›å‚è€ƒ, éšä¾¿ä½ æ€ä¹ˆåˆ†è·¯å¾„éƒ½å¯ä»¥, å…¨æŒ¤åœ¨ä¸€ä¸¤ä¸ªæ–‡ä»¶é‡Œéƒ½æ— æ‰€è°“<br>åƒæˆ‘å°±æ‡’å¾—åˆ†, ç›´æ¥ä¸€ä¸ªè½¯ä»¶åˆ†ä¸ªæ–‡ä»¶, è¦ä¿®æ”¹æ—¶ç›´æ¥ fuzzy-search(æ¨¡ç³Šæœç´¢) å°±å…‰é€Ÿæ‰“å¼€äº† :)<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-text text-sm sm:text-base">.
â”œâ”€â”€ assets
â”‚Â Â  â””â”€â”€ background.png
â”œâ”€â”€ flake.lock
â”œâ”€â”€ flake.nix
â”œâ”€â”€ modules
â”‚Â Â  â”œâ”€â”€ dev
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ default.nix
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ julia.nix
â”‚Â Â  â”‚Â Â  â””â”€â”€ rust.nix
â”‚Â Â  â”œâ”€â”€ home
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ default.nix
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ desktop
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ default.nix
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ zed-editor.nix
â”‚Â Â  â”‚Â Â  â””â”€â”€ terminal
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ alacritty.nix
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ default.nix
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ fastfetch
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ ghostty.nix
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ git.nix
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ helix
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ jujutsu.nix
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ kitty.nix
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ nushell
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ tmux.nix
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ yazi.nix
â”‚Â Â  â”‚Â Â      â””â”€â”€ zellij
â”‚Â Â  â”œâ”€â”€ nixconf.nix
â”‚Â Â  â”œâ”€â”€ system
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ aerospace.nix
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auto-start.nix
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ brew.nix
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ default.nix
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ jankyborders.nix
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ settings.nix
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ skhd.nix
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ stylix.nix
â”‚Â Â  â”‚Â Â  â””â”€â”€ yabai.nix
â”‚Â Â  â””â”€â”€ users.nix
â”œâ”€â”€ README.md
â””â”€â”€ switch.sh</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <hr class="border-2 border-dashed my-10">
      <h1 class="flex items-center w-fit my-6" id="pei-zhi"><span class="text-2xl mr-2 text-cyan-500">ğŸ”—</span> <a class="text-4xl hover:underline underline-offset-8" href="#pei-zhi">é…ç½®</a></h1>
      <h2 class="flex items-center w-fit my-6" id="darwin"><span class="text-2xl m-2 text-cyan-500">></span> <a class="text-2xl hover:underline underline-offset-8" href="#darwin">darwin</a></h2>
      <p>æˆ‘ä»¬éœ€è¦åœ¨ <code class="font-semibold text-[#aa8bd5]"><code>flake.nix</code></code> ä¸­æ·»åŠ  <code class="font-semibold text-[#aa8bd5]"><code>nix-darwin</code></code> æ¥é…ç½®ç³»ç»Ÿ:<br>(<code class="font-semibold text-[#aa8bd5]"><code>modules</code></code> ä¹Ÿåˆ«å¿˜äº†ä¿®æ”¹å“¦~)<br></p>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-nix text-sm sm:text-base"># ~/nix-darwin/flake.nix
{
  inputs = {
    nixpkgs.url = "github:nixos/nixpkgs/nixpkgs-unstable";
    darwin = {
      url = "github:nix-darwin/nix-darwin";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };

  outputs = inputs@{ nixpkgs, darwin, ... }:
    let
      system = "aarch64-darwin";
      hostname = "darwin";
      lib = nixpkgs.lib;
      vars = rec {
        inherit system hostname;
        userName = "kawayww"; # TODO: edit it
        userEmail = "kawayww@gmail.com"; # TODO: edit it
      };
      specialArgs = { inherit inputs vars; };
    in
    {
      darwinConfigurations."${hostname}" = darwin.lib.darwinSystem {
        inherit system specialArgs;
        modules = [
          # ...
          # ...
          # ...
        ];
      };
    };

}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <h2 class="flex items-center w-fit my-6" id="users"><span class="text-2xl m-2 text-cyan-500">></span> <a class="text-2xl hover:underline underline-offset-8" href="#users">users</a></h2>
      <pre class="group relative mx-2 sm:mx-6 my-4 border-2 border-slate-500 leading-[1.2em]"><script>
        function copy_code(button) {
          const code = button.parentElement.querySelector('code').innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'å¥½å•¦';
            setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
          });
        }
        function fold_code(button) {
          const code = button.parentElement.querySelector('code');
          const next_fold_state = button.textContent
          if (next_fold_state == 'æŠ˜å ') {
            if (!code.hasAttribute('data-original')) {
              code.setAttribute('data-original', code.innerHTML)
            }
            const lines = code.innerHTML.split('\n')
            const firstLine = lines[0]
            code.innerHTML = firstLine
            // code.style.display = 'none'
            button.textContent = 'å±•å¼€'
          } else {
            const lines = code.getAttribute('data-original')
            // code.style.display = 'block'
            code.innerHTML = lines
            button.textContent = 'æŠ˜å '
          }
        }
      </script><p><code class=" language-nix text-sm sm:text-base"># ~/nix-darwin/users.nix
{ vars, ... }:

let
  hostName = "${vars.hostname}";
  userName = "${vars.userName}";
in {
  networking.hostName = hostName;
  networking.computerName = hostName;
  system.defaults.smb.NetBIOSName = hostName;

  users.users."${userName}"= {
    home = "/Users/${userName}";
    description = userName;
  };
  system.primaryUser = userName;

  nix.settings.trusted-users = [ userName ];
}</code></p><button class="absolute top-2 right-2 hidden group-hover:inline text-xl" onclick="copy_code(this)">å¤åˆ¶</button><button class="absolute top-2 right-16 hidden group-hover:inline text-xl" onclick="fold_code(this)">æŠ˜å </button></pre>
      <h2 class="flex items-center w-fit my-6" id="ruan-jian-yuan"><span class="text-2xl m-2 text-cyan-500">></span> <a class="text-2xl hover:underline underline-offset-8" href="#ruan-jian-yuan">è½¯ä»¶æº</a></h2>
      <p>ä¸ºäº†çœå¿ƒ, å’‹ä»¬è¿˜æ˜¯å¾—å®‰ä¸ª homebrew å§?<br></p>
      <h2 class="flex items-center w-fit my-6" id="home-manager"><span class="text-2xl m-2 text-cyan-500">></span> <a class="text-2xl hover:underline underline-offset-8" href="#home-manager">home-manager</a></h2>
      <p>é¦–å…ˆè‡ªç„¶å¾—æ˜¯</p>
    </div>
  </body>
</html>
